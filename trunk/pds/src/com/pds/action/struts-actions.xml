<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
	<constant name="struts.i18n.encoding" value="UTF-8" />
	
	<package name="aboutus" extends="struts-default" namespace="/aboutus">

		<!-- 定义全局结果 在下面所有的Action中均可以使用 -->
		<global-results>
			<result name="error">/404.jsp</result>  <!-- 现在404并不转到404页面。 -->
			<!-- 现在依靠web.xml中的配置404页面。 -->
		</global-results>

		<!-- 全局异常映射定义 -->
		<global-exception-mappings>
			<exception-mapping result="sqlException" exception="java.sql.SQLException" />
		</global-exception-mappings>
		
		
		<action name="*" class="com.pds.action.AboutUsAction" method="{1}">
			<result name="sqlException">/error.jsp</result>
			<result>/aboutus/{1}.jsp</result>
			<result name="input">/aboutus/error.jsp</result>
			<result name="error">/aboutus/{1}Fail.jsp</result>
			<result name="addsuccess">/aboutus/{1}Succ.jsp</result>
			<result name="index">/aboutus/index.jsp</result>
			<result name="editSuccess">/aboutus/edit.jsp</result>
			<result name="editError">/aboutus/editError.jsp</result>
			<result name="updateSuccess">/aboutus/updateSuccess.jsp</result>
			<result name="deleteSuccess">/aboutus/deleteSuccess.jsp</result>
			<result name="toAdd">/aboutus/add.jsp</result>
		</action>
	</package>

	<package name="tongbao" extends="struts-default" namespace="/tongbao">
		<action name="*" class="com.pds.action.CriticismAction" method="{1}">
			<result>/tongbao/{1}.jsp</result>
			<result name="index">/tongbao/index.jsp</result>
			<result name="error">/tongbao/{1}Fail.jsp</result>
			<result name="addsuccess">/tongbao/{1}Succ.jsp</result>
			<result name="editSuccess">/tongbao/edit.jsp</result>
			<result name="editError">/tongbao/editError.jsp</result>
			<result name="updateSuccess">/tongbao/updateSuccess.jsp</result>
			<result name="deleteSuccess">/tongbao/deleteSuccess.jsp</result>
			<result name="toAdd">/tongbao/add.jsp</result>
		</action>
	</package>

	<package name="rules" extends="struts-default" namespace="/rules">
		<action name="*" class="com.pds.action.RulesAction" method="{1}">
			<result>/rules/{1}.jsp</result>
			<result name="index">/rules/index.jsp</result>
			<result name="error">/rules/{1}Fail.jsp</result>
			<result name="addsuccess">/rules/{1}Succ.jsp</result>
			<result name="toEditSucc">/rules/edit.jsp</result>
			<result name="toEditError">/rules/editError.jsp</result>
			<result name="updateSuccess">/rules/updateSuccess.jsp</result>
			<result name="deleteSuccess">/rules/deleteSuccess.jsp</result>
			<result name="toAdd">/rules/add.jsp</result>
		</action>
	</package>
	
	<package name="departments" extends="struts-default" namespace="/departments">
		<action name="*" class="com.pds.action.DepartmentsAction" method="{1}">
			<result>/departments/{1}.jsp</result>
			<result name="index">/departments/index.jsp</result>
			<result name="error">/departments/{1}Fail.jsp</result>
			<result name="updateSuccess">/departments/{1}Succ.jsp</result>
			<result name="toEdit">/departments/edit.jsp</result>
			<result name="toEditError">/departments/editError.jsp</result>
			<result name="updateSuccess">/departments/updateSuccess.jsp</result>
			<result name="deleteSuccess">/departments/deleteSuccess.jsp</result>
			<result name="toAdd">/departments/add.jsp</result>
		</action>
	
	</package>
	<package name="hotarticle" extends="struts-default" namespace="/hotarticle">
		<action name="*" class="com.pds.action.HotArticleAction" method="{1}">
			<result>/hotarticle/{1}.jsp</result>
			<result name="index">/hotarticle/index.jsp</result>
			<result name="error">/hotarticle/{1}Fail.jsp</result>
			<result name="updateSuccess">/hotarticle/{1}Succ.jsp</result>
			<result name="addsuccess">/hotarticle/{1}Succ.jsp</result>
			<result name="toEdit">/hotarticle/edit.jsp</result>
			<result name="toEditError">/hotarticle/editError.jsp</result>
			<result name="updateSuccess">/hotarticle/updateSuccess.jsp</result>
			<result name="deleteSuccess">/hotarticle/deleteSuccess.jsp</result>
			<result name="toAdd">/hotarticle/add.jsp</result>
			<result name="show">/hotarticle/show.jsp</result>
			<result name="showError">/hotarticle/showError.jsp</result>
		</action>
	
	</package>
	
	<package name="news" extends="struts-default" namespace="/news">
		<action name="*" class="com.pds.action.NewsAction" method="{1}">
			<result>/news/{1}.jsp</result>
			<result name="index">/news/index.jsp</result>
			<result name="error">/news/{1}Fail.jsp</result>
			<result name="updateSuccess">/news/{1}Succ.jsp</result>
			<result name="addsuccess">/news/{1}Succ.jsp</result>
			<result name="toEdit">/news/edit.jsp</result>
			<result name="toEditError">/news/editError.jsp</result>
			<result name="updateSuccess">/news/updateSuccess.jsp</result>
			<result name="deleteSuccess">/news/deleteSuccess.jsp</result>
			<result name="toAdd">/news/add.jsp</result>
			<result name="show">/news/show.jsp</result>
			<result name="showError">/news/showError.jsp</result>
		</action>
	</package>

	<package name="upload" extends="struts-default" namespace="/upload">
		<action name="upload" class="com.pds.action.FileUploadAction" method="upload">
			<interceptor-ref name="fileUpload">
				<!--配置允许上传的类型 -->
				<param name="allowedTypes">
					application/octet-stream,application/x-zip-compressed,image/bmp,image/png,image/gif,image/jpeg,image/jpg,image/x-png,image/pjpeg 
				</param>
				<!--配置允许上传的大小 10M -->
				<param name="maximumSize">10485760</param>
			</interceptor-ref>
			<!-- 配置系统默认拦截器 -->
			<interceptor-ref name="defaultStack" />
			
			<!-- 动态设置Action中的savePath属性 -->
			<param name="savePath">/uploads</param>
			<result name="input">/file/upload.jsp</result>
			<result name="uploadSuccess">/file/uploadSucc.jsp</result>
			<result name="uploadError">/file/uploadError.jsp</result>
		</action>
		
		<action name="index" class="com.pds.action.FileUploadAction"
			method="index">
			<result name="index">/file/upload.jsp</result>
		</action>
<!--		<action name="*" class="com.pds.action.FileUploadAction"-->
<!--			method="{1}">-->
<!--			<result name="index">/file/upload.jsp</result>-->
<!--		</action>-->
	</package>
	
	<package name="file" extends="struts-default" namespace="/file">
		<action name="*" class="com.pds.action.FileAction" method="{1}">
			<result>/file/{1}.jsp</result>
			<result name="index">/file/index.jsp</result>
			<result name="error">/file/{1}Fail.jsp</result>
			<result name="updateSuccess">/file/{1}Succ.jsp</result>
			<result name="toEdit">/file/edit.jsp</result>
			<result name="toEditError">/file/editError.jsp</result>
			<result name="updateSuccess">/file/updateSuccess.jsp</result>
			<result name="deleteSuccess">/file/deleteSuccess.jsp</result>
			<result name="toAdd">/file/add.jsp</result>
		</action>
	</package>

	<package name="download" extends="struts-default" namespace="/download" >
		<!-- 文件下载，支持中文附件名 -->
		<action name="download" class="com.pds.action.FileDownloadAction">
			<!-- 初始文件存放路径 -->
			<param name="inputPath">uploads/</param> <!-- /WEB-INF/upload/ -->
			<result name="success" type="stream">
				<param name="contentType">
					application/octet-stream;charset=ISO8859-1
      		</param>
				<param name="inputName">inputStream</param>
				<!--
					使用经过转码的文件名作为下载文件名，downloadFileName属性 对应action类中的方法
					getDownloadFileName()
				-->
				<param name="contentDisposition">attachment;filename="${downloadFileName}"</param>
				<param name="bufferSize">4096</param>
			</result>
		</action>
	</package>
	
	<package name="ajax" extends="json-default" namespace="/ajax">
		<action name="test" class="com.pds.action.ajax.AjaxActionTest" method="test">
			<result type="json" >
				<!-- root的值对应要返回的值的属性 -->
				<!-- 这里的result值即是 对应action中的 result -->
<!--				<param name="root"></param>-->

			<!-- Action中不参与序列化的属性，支持ognl，多个之间用，分开 -->
			<param name="excludeProperties">  
			      name,result 
			</param> 
			</result>
		</action>
	</package>

	<package name="backGroundUser" extends="struts-default" namespace="/backGroundUser">
		<action name="*" class="com.pds.action.BackgroundUserAction" method="{1}">
			<result name="index">/WEB-INF/backGroundUser/index.jsp</result>
			<result name="test">/WEB-INF/backGroundUser/index.jsp</result>
		</action>
	</package>
</struts>    
